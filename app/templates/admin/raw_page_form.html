{% extends "base.html" %}
{% block title %}{{ '編輯頁面' if page else '新增頁面' }}{% endblock %}
{% block extra_js %}
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
<script>
  document.addEventListener('DOMContentLoaded', function(){
    tinymce.init({
      selector: '#editor',
      height: 400,
      plugins: 'table lists link image code',
      toolbar: 'undo redo | styles | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | table | link image | code',
      menubar: 'file edit view insert format tools table help'
    });
  });
</script>
{% endblock %}
{% block content %}
<div class="container py-3">
  <div class="card">
    <div class="card-header">{{ '編輯頁面' if page else '新增頁面' }}</div>
    <div class="card-body">
      <form method="post">
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">類型</label>
            <select name="type" class="form-select">
              {% for t in page_types %}
                <option value="{{ t.name }}" {% if page and page.type == t %}selected{% endif %}>{{ t.value }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-8">
            <label class="form-label">標題</label>
            <input class="form-control" name="title" value="{{ page.title if page }}" required />
          </div>
          <div class="col-12">
            <label class="form-label">圖片URL</label>
            <input class="form-control" name="image" value="{{ page.image if page }}" />
          </div>
          <div class="col-12">
            <label class="form-label">內容</label>
            <textarea id="editor" name="content">{{ page.content if page }}</textarea>
          </div>
        </div>
        <div class="mt-3 d-flex gap-2">
          <button class="btn btn-primary" type="submit">儲存</button>
          <a href="{{ url_for('admin_raw_pages') }}" class="btn btn-secondary">返回</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}